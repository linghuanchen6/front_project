{"ast":null,"code":"export default {\n  //组件使用的数据\n  data() {\n    return {\n      diseasePage: {},\n      queryCondition: {\n        diseaseName: '',\n        diseaseCode: '',\n        currentPage: 1,\n        pageSize: 10\n      },\n      OpenDialog: false,\n      formData: {\n        diseaseId: 0,\n        diseaseName: '',\n        diseaseCode: ''\n      },\n      formRules: {\n        diseaseName: [{\n          required: true,\n          message: '请输入疾病名称',\n          trigger: 'blur'\n        }, {\n          max: 10,\n          message: '疾病名称的长度不能超过十个字符',\n          trigger: 'blur'\n        }],\n        diseaseCode: [{\n          required: true,\n          message: '请输入疾病编码',\n          trigger: 'blur'\n        }, {\n          trigger: 'blur'\n        }]\n      },\n      actionType: '',\n      diseases: []\n    };\n  },\n  //事件处理方法\n  methods: {\n    getDiseaseList() {\n      this.$http.get('/api/disease/list', {\n        params: this.queryCondition\n      }).then(res => {\n        console.log(res);\n        this.diseasePage = res.data.data.diseasePage;\n      });\n    },\n    add() {\n      this.formData = {};\n      this.actionType = '添加疾病';\n      this.OpenDialog = true;\n    },\n    handleSizeChange(val) {\n      this.queryCondition.pageSize = val;\n      this.getDiseaseList();\n    },\n    handleCurrentChange(val) {\n      this.queryCondition.currentPage = val;\n      this.getDiseaseList();\n    },\n    handleSelectionChange(val) {\n      this.diseases = val;\n    },\n    deleteBatch() {\n      let diseaseIds = '';\n      let diseaseNames = '';\n      this.diseases.forEach(disease => {\n        diseaseIds += disease.diseaseId + ',';\n        diseaseNames += disease.diseaseName + ',';\n      });\n      diseaseIds = diseaseIds.substring(0, diseaseIds.length - 1);\n      diseaseNames = diseaseNames.substring(0, diseaseNames.length - 1);\n      const result = this.$confirm('是否确认删除【' + diseaseNames + '】', '删除确认', {\n        confirmButtonText: '删除',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        console.log(diseaseIds);\n        this.$http.delete('/api/disease/deleteBatch?diseaseIds=' + diseaseIds).then(res => {\n          if (res.data.status == 1) {\n            this.$message.success(res.data.message);\n            this.getDiseaseList();\n          } else {\n            this.$message.error(res.data.message);\n          }\n        });\n      }).catch(() => {});\n    },\n    addOrModify() {\n      this.$refs.formRef.validate(valid => {\n        if (valid) {\n          if (this.actionType == '添加疾病') {\n            this.$http.post('/api/disease/add', this.formData).then(res => {\n              if (res.data.status == 1) {\n                this.$message.success(res.data.message);\n                this.getDiseaseList();\n              } else {\n                this.$message.error(res.data.message);\n              }\n            });\n          } else {\n            this.$http.put('/api/disease/modify', this.formData).then(res => {\n              if (res.data.status == 1) {\n                this.$message.success(res.data.message);\n                this.getDiseaseList();\n              } else {\n                this.$message.error(res.data.message);\n              }\n            });\n          }\n          this.OpenDialog = false;\n        } else {\n          this.$message.error(\"输入数据有误，请检查后再提交\");\n        }\n      });\n    },\n    modify(diseaseId) {\n      this.$http.get('/api/disease/get/' + diseaseId).then(res => {\n        if (res.data.status == 1) {\n          this.formData = res.data.data.disease;\n          this.actionType = '修改疾病';\n          this.OpenDialog = true;\n        } else {\n          this.$message.error(res.data.message);\n        }\n      });\n    },\n    remove(diseaseId, diseaseName) {\n      this.$confirm('是否确认删除【' + diseaseName + '】', '删除确认', {\n        confirmButtonText: '删除',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        this.$http.delete('/api/disease/remove/' + diseaseId).then(res => {\n          if (res.data.status == 1) {\n            this.$message.success(res.data.message);\n            this.getDiseaseList();\n          } else {\n            this.$message.error(res.data.message);\n          }\n        });\n      }).catch(() => {});\n    }\n  },\n  //页面加载时\n  mounted() {\n    this.getDiseaseList();\n  }\n};","map":{"version":3,"names":["data","diseasePage","queryCondition","diseaseName","diseaseCode","currentPage","pageSize","OpenDialog","formData","diseaseId","formRules","required","message","trigger","max","actionType","diseases","methods","getDiseaseList","$http","get","params","then","res","console","log","add","handleSizeChange","val","handleCurrentChange","handleSelectionChange","deleteBatch","diseaseIds","diseaseNames","forEach","disease","substring","length","result","$confirm","confirmButtonText","cancelButtonText","type","delete","status","$message","success","error","catch","addOrModify","$refs","formRef","validate","valid","post","put","modify","remove","mounted"],"sources":["src/views/data/Disease.vue"],"sourcesContent":["<template>\r\n  <div>\r\n\r\n    <!-- 面包屑导航 -->\r\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n      <el-breadcrumb-item :to=\"{path: '/welcome'}\">首页</el-breadcrumb-item>\r\n      <el-breadcrumb-item>基础数据</el-breadcrumb-item>\r\n      <el-breadcrumb-item>疾病管理</el-breadcrumb-item>\r\n    </el-breadcrumb>\r\n\r\n    <!-- 卡片容器 -->\r\n    <el-card>\r\n\r\n      <el-input v-model=\"queryCondition.diseaseName\" placeholder=\"疾病名称\" style=\"width: 250px\"></el-input>\r\n      <el-input v-model=\"queryCondition.diseaseCode\" placeholder=\"疾病编码\" style=\"width: 250px\"></el-input>\r\n      <el-button type=\"primary\" style=\"margin-left: 20px\" @click=\"getDiseaseList\">查询</el-button>\r\n      <el-button type=\"danger\" @click=\"deleteBatch\" >批量删除</el-button>\r\n      <el-button type=\"primary\"  @click=\"add\">添加疾病</el-button>\r\n      <!-- 数据表格 -->\r\n      <el-table :data=\"diseasePage.records\" style=\"width: 80%\" stripe border @selection-change=\"handleSelectionChange\">\r\n\r\n        <el-table-column type=\"selection\"/>\r\n        <el-table-column prop=\"diseaseId\" label=\"疾病编号\">\r\n        </el-table-column>\r\n\r\n        <el-table-column prop=\"diseaseName\" label=\"疾病名称\">\r\n        </el-table-column>\r\n\r\n        <el-table-column prop=\"diseaseCode\" label=\"疾病编码\">\r\n        </el-table-column>\r\n\r\n        <el-table-column label=\"操作\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button type=\"primary\" size=\"mini\" icon=\"el-icon-edit\" @click=\"modify(scope.row.diseaseId)\" ></el-button>\r\n            <el-button type=\"danger\" size=\"mini\" icon=\"el-icon-delete\" @click=\"remove(scope.row.diseaseId,scope.row.diseaseName)\"></el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      <el-pagination\r\n          @size-change=\"handleSizeChange\"\r\n          @current-change=\"handleCurrentChange\"\r\n          :current-page=\"queryCondition.currentPage\"\r\n          :page-sizes=\"[2, 4, 5, 10]\"\r\n          :page-size=\"queryCondition.pageSize\"\r\n          layout=\"total, sizes, prev, pager, next, jumper\"\r\n          :total=\"diseasePage.total\">\r\n      </el-pagination>\r\n\r\n    </el-card>\r\n\r\n\r\n    <el-dialog :title=\"actionType\" :visible.sync=\"OpenDialog\" width=\"30%\" center>\r\n      <el-form :model=\"formData\" :rules=\"formRules\" ref=\"formRef\">\r\n        <el-form-item label=\"疾病名称\" label-width=\"100px\" :label-width=\"diseaseName\">\r\n          <el-input v-model=\"formData.diseaseName\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"疾病编码\" label-width=\"100px\" :label-width=\"diseaseCode\">\r\n          <el-input v-model=\"formData.diseaseCode\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\">\r\n        <el-button @click=\"OpenDialog = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"addOrModify\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n<script>\r\n\r\nexport default{\r\n\r\n  //组件使用的数据\r\n  data(){\r\n    return{\r\n      diseasePage:{},\r\n      queryCondition:{\r\n        diseaseName:'',\r\n        diseaseCode:'',\r\n        currentPage:1,\r\n        pageSize:10,\r\n      },\r\n      OpenDialog:false,\r\n\r\n      formData:{\r\n        diseaseId:0,\r\n        diseaseName:'',\r\n        diseaseCode:'',\r\n      },\r\n      formRules:{\r\n        diseaseName:[\r\n          { required:true, message:'请输入疾病名称',trigger:'blur'},\r\n          { max:10, message: '疾病名称的长度不能超过十个字符',trigger:'blur'}\r\n        ],\r\n\r\n        diseaseCode:[\r\n          { required:true, message:'请输入疾病编码',trigger:'blur'},\r\n          { trigger:'blur'}\r\n        ]\r\n      },\r\n      actionType:'',\r\n      diseases:[],\r\n    }\r\n  },\r\n\r\n  //事件处理方法\r\n  methods: {\r\n    getDiseaseList(){\r\n      this.$http.get('/api/disease/list', {params:this.queryCondition}).then(\r\n          res => {\r\n            console.log(res)\r\n            this.diseasePage = res.data.data.diseasePage\r\n          }\r\n      )\r\n    },\r\n    add(){\r\n      this.formData={}\r\n\r\n      this.actionType='添加疾病'\r\n\r\n      this.OpenDialog=true\r\n    },\r\n    handleSizeChange(val) {\r\n      this.queryCondition.pageSize = val;\r\n      this.getDiseaseList();\r\n    },\r\n    handleCurrentChange(val) {\r\n      this.queryCondition.currentPage = val;\r\n      this.getDiseaseList();\r\n    },\r\n\r\n    handleSelectionChange(val){\r\n      this.diseases = val\r\n    },\r\n\r\n    deleteBatch(){\r\n\r\n      let diseaseIds = ''\r\n      let diseaseNames = ''\r\n\r\n      this.diseases.forEach( disease => {\r\n        diseaseIds += disease.diseaseId + ','\r\n        diseaseNames += disease.diseaseName + ','\r\n      })\r\n\r\n      diseaseIds = diseaseIds.substring(0, diseaseIds.length - 1)\r\n      diseaseNames = diseaseNames.substring(0, diseaseNames.length - 1)\r\n\r\n      const result = this.$confirm(\r\n          '是否确认删除【' + diseaseNames + '】','删除确认',\r\n          {\r\n            confirmButtonText:'删除',\r\n            cancelButtonText:'取消',\r\n            type:'warning'\r\n          }\r\n      ).then(() => {\r\n        console.log(diseaseIds)\r\n        this.$http.delete('/api/disease/deleteBatch?diseaseIds='+diseaseIds).then(\r\n            res => {\r\n              if(res.data.status == 1){\r\n                this.$message.success(res.data.message)\r\n\r\n                this.getDiseaseList()\r\n              }else{\r\n                this.$message.error(res.data.message)\r\n              }\r\n            }\r\n        )\r\n      }).catch(() => {})\r\n    },\r\n    addOrModify(){\r\n      this.$refs.formRef.validate(\r\n          valid =>{\r\n            if(valid){\r\n              if(this.actionType=='添加疾病'){\r\n                this.$http.post('/api/disease/add', this.formData).then(\r\n                    res => {\r\n                      if(res.data.status == 1){\r\n                        this.$message.success(res.data.message)\r\n\r\n                        this.getDiseaseList()\r\n                      }else{\r\n                        this.$message.error(res.data.message)\r\n                      }\r\n                    }\r\n                )\r\n              }else{\r\n                this.$http.put('/api/disease/modify', this.formData).then(\r\n                    res => {\r\n                      if(res.data.status == 1){\r\n                        this.$message.success(res.data.message)\r\n\r\n                        this.getDiseaseList()\r\n                      }else{\r\n                        this.$message.error(res.data.message)\r\n                      }\r\n                    }\r\n                )\r\n              }\r\n              this.OpenDialog= false\r\n            }else{\r\n              this.$message.error(\"输入数据有误，请检查后再提交\")\r\n            }\r\n          }\r\n      )\r\n    },\r\n    modify(diseaseId){\r\n      this.$http.get('/api/disease/get/'+diseaseId).then(\r\n          res => {\r\n            if(res.data.status == 1){\r\n              this.formData = res.data.data.disease;\r\n\r\n              this.actionType='修改疾病';\r\n\r\n              this.OpenDialog=true;\r\n\r\n            }else{\r\n              this.$message.error(res.data.message)\r\n            }\r\n          }\r\n      )\r\n    },\r\n    remove(diseaseId, diseaseName){\r\n\r\n      this.$confirm(\r\n          '是否确认删除【'+diseaseName+'】','删除确认',\r\n          {\r\n            confirmButtonText:'删除',\r\n            cancelButtonText:'取消',\r\n            type:'warning'\r\n          }\r\n      ).then(() => {\r\n        this.$http.delete('/api/disease/remove/'+diseaseId).then(\r\n            res => {\r\n              if(res.data.status == 1){\r\n                this.$message.success(res.data.message)\r\n\r\n                this.getDiseaseList()\r\n              }else{\r\n                this.$message.error(res.data.message)\r\n              }\r\n            }\r\n        )\r\n      }).catch(() => {})\r\n    },\r\n  },\r\n\r\n  //页面加载时\r\n  mounted(){\r\n    this.getDiseaseList()\r\n  }\r\n}\r\n\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}