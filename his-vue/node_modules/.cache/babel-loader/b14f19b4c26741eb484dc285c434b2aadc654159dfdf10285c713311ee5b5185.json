{"ast":null,"code":"export default {\n  data() {\n    return {\n      checkVOList: [],\n      registerId: '',\n      drugVOList: []\n    };\n  },\n  methods: {\n    //\n    getCheckList() {\n      this.$http.get('/api/request/list/' + this.registerId).then(res => {\n        this.checkVOList = res.data.data.checkVOList;\n        console.log(this.checkVOList);\n      });\n      this.$http.get('/api/prescription/list/' + this.registerId + '/1').then(res => {\n        this.drugVOList = res.data.data.drugVOList;\n      });\n    },\n    async charge() {\n      const result = await this.$confirm('是否确定缴费【' + this.totalAmount + '】元', '缴费确定');\n      if (result == 'confirm') {\n        this.$http.put('/api/request/fee/' + this.registerId).then(res => {\n          if (res.data.status == 1) {\n            this.$message.success(res.data.message);\n            this.registerId = '';\n            this.checkVOList = [];\n          } else {\n            this.$message.error(res.data.message);\n          }\n        });\n      }\n    },\n    async chargeDrug() {\n      const result = await this.$confirm('是否确定药品缴费【' + this.totalAmountDrug + '】元', '缴费确认');\n      if (result == 'confirm') {\n        this.$http.put('/api/prescription/fee/' + this.registerId).then(res => {\n          if (res.data.status == 1) {\n            this.$message.success(res.data.message);\n            this.registerId = '';\n            this.drugVOList = [];\n          } else {\n            this.$message.error(res.data.message);\n          }\n        });\n      }\n    }\n  },\n  computed: {\n    totalAmount() {\n      let checkAmount = 0;\n      this.checkVOList.forEach(checkVO => {\n        checkAmount += checkVO.checkAmount;\n      });\n      return checkAmount;\n    },\n    totalAmountDrug() {\n      let drugAmount = 0;\n      this.drugVOList.forEach(drugVO => {\n        console.log(drugVO);\n        drugAmount += drugVO.totalPrice;\n      });\n      return drugAmount;\n    }\n  },\n  mounted() {}\n};","map":{"version":3,"names":["data","checkVOList","registerId","drugVOList","methods","getCheckList","$http","get","then","res","console","log","charge","result","$confirm","totalAmount","put","status","$message","success","message","error","chargeDrug","totalAmountDrug","computed","checkAmount","forEach","checkVO","drugAmount","drugVO","totalPrice","mounted"],"sources":["src/views/window/Fee.vue"],"sourcesContent":["<template>\r\n\t<div>\r\n\t\t\r\n\t\t<!-- 面包屑导航 -->\r\n\t\t<el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n\t\t  <el-breadcrumb-item :to=\"{path: '/welcome'}\">首页</el-breadcrumb-item>\r\n\t\t  <el-breadcrumb-item>挂号收费</el-breadcrumb-item>\r\n\t\t  <el-breadcrumb-item>窗口收费</el-breadcrumb-item>\r\n\t\t</el-breadcrumb>\r\n\t\t\r\n\t\t<!-- 卡片容器 -->\r\n\t\t<el-card>\r\n\t\t\t\r\n\t\t\t<!--查询条件-->\r\n\t\t\t<el-input v-model=\"registerId\" placeholder=\"请输入病历号\" style=\"width: 200px;\"/>\r\n\t\t\t<el-button type=\"primary\" @click=\"getCheckList\" >查询</el-button>\r\n\r\n\t\t\t\r\n\t\t\t<!-- 数据表格 -->\r\n\t\t\t<el-table :data=\"checkVOList\" stripe border>\r\n\r\n        <el-table-column type=\"index\" align=\"center\" width=\"100\"/>\r\n        <el-table-column prop=\"checkName\" label=\"检查项目名称\"/>\r\n        <el-table-column prop=\"checkAmount\" label=\"检查项目费用\"/>\r\n        <el-table-column prop=\"checkTime\" label=\"检查项目时间\"/>\r\n\r\n      </el-table>\r\n      <el-tag>总计金额：{{totalAmount}}元</el-tag>\r\n      <el-button type=\"primary\" @click=\"charge\" :disabled=\"checkVOList.length==0\">立即缴费</el-button>\r\n\r\n      <el-table :data=\"drugVOList\" stripe border>\r\n\r\n        <el-table-column type=\"index\" label=\"序号\" align=\"center\" width=\"100\"/>\r\n        <el-table-column prop=\"drugName\" label=\"药品名称\"/>\r\n        <el-table-column prop=\"drugPrice\" label=\"药品单价\"/>\r\n        <el-table-column prop=\"quantity\" label=\"药品数量\"/>\r\n        <el-table-column prop=\"totalPrice\" label=\"价格小计(元)\"/>\r\n        <el-table-column prop=\"createTime\" label=\"开药时间\"/>\r\n\r\n      </el-table>\r\n\r\n      <el-tag>总计金额：{{totalAmountDrug}}元</el-tag>\r\n\r\n      <el-button type=\"primary\" @click=\"chargeDrug\" :disabled=\"drugVOList.length==0\">立即缴费</el-button>\r\n\t\t</el-card>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\texport default {\r\n\r\n      data() {\r\n          return {\r\n            checkVOList: [],\r\n            registerId: '',\r\n            drugVOList:[],\r\n          }\r\n      },\r\n\r\n        methods: {\r\n            //\r\n            getCheckList() {\r\n                this.$http.get('/api/request/list/'+ this.registerId).then(\r\n\r\n                    res => {\r\n                      this.checkVOList = res.data.data.checkVOList\r\n                      console.log(this.checkVOList)\r\n                    }\r\n                )\r\n\r\n              this.$http.get('/api/prescription/list/' + this.registerId + '/1').then(\r\n                  res => {\r\n                    this.drugVOList = res.data.data.drugVOList\r\n                  }\r\n              )\r\n            },\r\n\r\n            async charge() {\r\n                const result = await this.$confirm('是否确定缴费【' + this.totalAmount + '】元', '缴费确定');\r\n                if (result == 'confirm') {\r\n                    this.$http.put('/api/request/fee/' + this.registerId).then(\r\n                        res => {\r\n                            if (res.data.status == 1) {\r\n                                this.$message.success(res.data.message)\r\n                                this.registerId = ''\r\n                                this.checkVOList = []\r\n                            } else {\r\n                                this.$message.error(res.data.message)\r\n                            }\r\n                        }\r\n                    )\r\n                }\r\n            },\r\n\r\n            async chargeDrug(){\r\n              const  result = await this.$confirm('是否确定药品缴费【' + this.totalAmountDrug + '】元','缴费确认' )\r\n\r\n              if(result == 'confirm'){\r\n\r\n                this.$http.put('/api/prescription/fee/' + this.registerId).then(\r\n                    res => {\r\n                      if(res.data.status == 1){\r\n                        this.$message.success(res.data.message)\r\n\r\n                        this.registerId = ''\r\n\r\n                        this.drugVOList = []\r\n                      }else {\r\n                        this.$message.error(res.data.message)\r\n                      }\r\n                    }\r\n                )\r\n              }\r\n            }\r\n        },\r\n        computed: {\r\n            totalAmount() {\r\n                let checkAmount = 0\r\n                this.checkVOList.forEach(checkVO => {\r\n                        checkAmount += checkVO.checkAmount\r\n                    }\r\n                )\r\n                return checkAmount\r\n            },\r\n\r\n          totalAmountDrug(){\r\n\r\n              let drugAmount = 0\r\n\r\n            this.drugVOList.forEach(drugVO => {\r\n              console.log(drugVO)\r\n              drugAmount += drugVO.totalPrice\r\n            })\r\n\r\n            return drugAmount\r\n          }\r\n        },\r\n        mounted() {\r\n\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    .el-tag{\r\n        margin: 0px 60px;\r\n    }\r\n</style>\r\n"],"mappings":"AAiDA;EAEAA,KAAA;IACA;MACAC,WAAA;MACAC,UAAA;MACAC,UAAA;IACA;EACA;EAEAC,OAAA;IACA;IACAC,aAAA;MACA,KAAAC,KAAA,CAAAC,GAAA,6BAAAL,UAAA,EAAAM,IAAA,CAEAC,GAAA;QACA,KAAAR,WAAA,GAAAQ,GAAA,CAAAT,IAAA,CAAAA,IAAA,CAAAC,WAAA;QACAS,OAAA,CAAAC,GAAA,MAAAV,WAAA;MACA,CACA;MAEA,KAAAK,KAAA,CAAAC,GAAA,kCAAAL,UAAA,SAAAM,IAAA,CACAC,GAAA;QACA,KAAAN,UAAA,GAAAM,GAAA,CAAAT,IAAA,CAAAA,IAAA,CAAAG,UAAA;MACA,CACA;IACA;IAEA,MAAAS,OAAA;MACA,MAAAC,MAAA,cAAAC,QAAA,kBAAAC,WAAA;MACA,IAAAF,MAAA;QACA,KAAAP,KAAA,CAAAU,GAAA,4BAAAd,UAAA,EAAAM,IAAA,CACAC,GAAA;UACA,IAAAA,GAAA,CAAAT,IAAA,CAAAiB,MAAA;YACA,KAAAC,QAAA,CAAAC,OAAA,CAAAV,GAAA,CAAAT,IAAA,CAAAoB,OAAA;YACA,KAAAlB,UAAA;YACA,KAAAD,WAAA;UACA;YACA,KAAAiB,QAAA,CAAAG,KAAA,CAAAZ,GAAA,CAAAT,IAAA,CAAAoB,OAAA;UACA;QACA,CACA;MACA;IACA;IAEA,MAAAE,WAAA;MACA,MAAAT,MAAA,cAAAC,QAAA,oBAAAS,eAAA;MAEA,IAAAV,MAAA;QAEA,KAAAP,KAAA,CAAAU,GAAA,iCAAAd,UAAA,EAAAM,IAAA,CACAC,GAAA;UACA,IAAAA,GAAA,CAAAT,IAAA,CAAAiB,MAAA;YACA,KAAAC,QAAA,CAAAC,OAAA,CAAAV,GAAA,CAAAT,IAAA,CAAAoB,OAAA;YAEA,KAAAlB,UAAA;YAEA,KAAAC,UAAA;UACA;YACA,KAAAe,QAAA,CAAAG,KAAA,CAAAZ,GAAA,CAAAT,IAAA,CAAAoB,OAAA;UACA;QACA,CACA;MACA;IACA;EACA;EACAI,QAAA;IACAT,YAAA;MACA,IAAAU,WAAA;MACA,KAAAxB,WAAA,CAAAyB,OAAA,CAAAC,OAAA;QACAF,WAAA,IAAAE,OAAA,CAAAF,WAAA;MACA,CACA;MACA,OAAAA,WAAA;IACA;IAEAF,gBAAA;MAEA,IAAAK,UAAA;MAEA,KAAAzB,UAAA,CAAAuB,OAAA,CAAAG,MAAA;QACAnB,OAAA,CAAAC,GAAA,CAAAkB,MAAA;QACAD,UAAA,IAAAC,MAAA,CAAAC,UAAA;MACA;MAEA,OAAAF,UAAA;IACA;EACA;EACAG,QAAA,GAEA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}