{"ast":null,"code":"import _regeneratorRuntime from \"F:/HIS/his-vue/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"F:/HIS/his-vue/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nexport default {\n  data: function data() {\n    return {\n      drugVOList: [],\n      registerId: ''\n    };\n  },\n  methods: {\n    //\n    getDrugList: function getDrugList() {\n      var _this = this;\n      this.$http.get('/api/prescription/list/' + this.registerId + '/2').then(function (res) {\n        _this.drugVOList = res.data.data.drugVOList;\n      });\n    },\n    takeDrug: function takeDrug() {\n      var _this2 = this;\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var result;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _this2.$confirm('是否确定取出药品', '取药确认');\n            case 2:\n              result = _context.sent;\n              if (result == 'confirm') {\n                _this2.$http.put('/api/prescription/take/' + _this2.registerId).then(function (res) {\n                  if (res.data.status == 1) {\n                    _this2.$message.success(res.data.message);\n                    _this2.registerId = '';\n                    _this2.drugVOList = [];\n                  } else {\n                    _this2.$message.error(res.data.message);\n                  }\n                });\n              }\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      }))();\n    }\n  },\n  mounted: function mounted() {}\n};","map":{"version":3,"names":["data","drugVOList","registerId","methods","getDrugList","_this","$http","get","then","res","takeDrug","_this2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","result","wrap","_callee$","_context","prev","next","$confirm","sent","put","status","$message","success","message","error","stop","mounted"],"sources":["src/views/window/TakeDrug.vue"],"sourcesContent":["<template>\r\n  <div>\r\n\r\n    <!-- 面包屑导航 -->\r\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n      <el-breadcrumb-item :to=\"{path: '/welcome'}\">首页</el-breadcrumb-item>\r\n      <el-breadcrumb-item>挂号收费</el-breadcrumb-item>\r\n      <el-breadcrumb-item>窗口取药</el-breadcrumb-item>\r\n    </el-breadcrumb>\r\n\r\n    <!-- 卡片容器 -->\r\n    <el-card>\r\n\r\n      <!--查询条件-->\r\n      <el-input v-model=\"registerId\" placeholder=\"请输入病历号\" style=\"width: 200px;\"/>\r\n      <el-button type=\"primary\" @click=\"getDrugList\" >查询</el-button>\r\n\r\n\r\n      <!-- 数据表格 -->\r\n      <el-table :data=\"drugVOList\" stripe border>\r\n\r\n        <el-table-column type=\"index\" label=\"序号\" align=\"center\" width=\"100\"/>\r\n        <el-table-column prop=\"drugName\" label=\"药品名称\"/>\r\n        <el-table-column prop=\"drugPrice\" label=\"药品单价\"/>\r\n        <el-table-column prop=\"quantity\" label=\"药品数量\"/>\r\n        <el-table-column prop=\"totalPrice\" label=\"价格小计(元)\"/>\r\n        <el-table-column prop=\"createTime\" label=\"开药时间\"/>\r\n\r\n      </el-table>\r\n\r\n      <el-button type=\"primary\" @click=\"takeDrug\" :disabled=\"drugVOList.length==0\">立即取药</el-button>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n\r\n  data() {\r\n    return {\r\n      drugVOList: [],\r\n      registerId: '',\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    //\r\n    getDrugList() {\r\n      this.$http.get('/api/prescription/list/'+ this.registerId + '/2').then(\r\n\r\n          res => {\r\n            this.drugVOList = res.data.data.drugVOList\r\n\r\n          }\r\n      )\r\n    },\r\n\r\n    async takeDrug() {\r\n      const result = await this.$confirm('是否确定取出药品' , '取药确认');\r\n      if (result == 'confirm') {\r\n        this.$http.put('/api/prescription/take/' + this.registerId).then(\r\n            res => {\r\n              if (res.data.status == 1) {\r\n                this.$message.success(res.data.message)\r\n                this.registerId = ''\r\n                this.drugVOList = []\r\n              } else {\r\n                this.$message.error(res.data.message)\r\n              }\r\n            }\r\n        )\r\n      }\r\n    },\r\n\r\n  },\r\n\r\n  mounted() {\r\n\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n"],"mappings":";;AAoCA;EAEAA,IAAA,WAAAA,KAAA;IACA;MACAC,UAAA;MACAC,UAAA;IACA;EACA;EAEAC,OAAA;IACA;IACAC,WAAA,WAAAA,YAAA;MAAA,IAAAC,KAAA;MACA,KAAAC,KAAA,CAAAC,GAAA,kCAAAL,UAAA,SAAAM,IAAA,CAEA,UAAAC,GAAA;QACAJ,KAAA,CAAAJ,UAAA,GAAAQ,GAAA,CAAAT,IAAA,CAAAA,IAAA,CAAAC,UAAA;MAEA,CACA;IACA;IAEAS,QAAA,WAAAA,SAAA;MAAA,IAAAC,MAAA;MAAA,OAAAC,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,UAAAC,QAAA;QAAA,IAAAC,MAAA;QAAA,OAAAH,mBAAA,GAAAI,IAAA,UAAAC,SAAAC,QAAA;UAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;YAAA;cAAAF,QAAA,CAAAE,IAAA;cAAA,OACAV,MAAA,CAAAW,QAAA;YAAA;cAAAN,MAAA,GAAAG,QAAA,CAAAI,IAAA;cACA,IAAAP,MAAA;gBACAL,MAAA,CAAAL,KAAA,CAAAkB,GAAA,6BAAAb,MAAA,CAAAT,UAAA,EAAAM,IAAA,CACA,UAAAC,GAAA;kBACA,IAAAA,GAAA,CAAAT,IAAA,CAAAyB,MAAA;oBACAd,MAAA,CAAAe,QAAA,CAAAC,OAAA,CAAAlB,GAAA,CAAAT,IAAA,CAAA4B,OAAA;oBACAjB,MAAA,CAAAT,UAAA;oBACAS,MAAA,CAAAV,UAAA;kBACA;oBACAU,MAAA,CAAAe,QAAA,CAAAG,KAAA,CAAApB,GAAA,CAAAT,IAAA,CAAA4B,OAAA;kBACA;gBACA,CACA;cACA;YAAA;YAAA;cAAA,OAAAT,QAAA,CAAAW,IAAA;UAAA;QAAA,GAAAf,OAAA;MAAA;IACA;EAEA;EAEAgB,OAAA,WAAAA,QAAA,GAEA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}