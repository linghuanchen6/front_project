{"ast":null,"code":"export default {\n  data() {\n    return {\n      //分页对象！\n\n      //查询条件对象\n      queryCondition: {\n        registerDate: '',\n        registerNoon: '',\n        deptId: '',\n        levelId: ''\n      },\n      //表单数据对象\n      formData: {\n        patientName: '',\n        patientGender: '',\n        registerDate: '',\n        registerNoon: '',\n        settleMode: '',\n        feeMode: '',\n        deptId: '',\n        levelId: '',\n        doctorId: '',\n        needBook: '',\n        registerAmount: 0\n      },\n      //表单数据校验规则对象\n      formRules: {\n        patientName: [{\n          required: true,\n          message: '请输入患者姓名',\n          trigger: 'blur'\n        }, {\n          max: 10,\n          message: '患者姓名的长度不能超过10个字符',\n          trigger: 'blur'\n        }],\n        registerDate: [{\n          required: true,\n          message: '请选择看诊日期',\n          trigger: 'blur'\n        }],\n        feeMode: [{\n          required: true,\n          message: '请选择收费方式',\n          trigger: 'blur'\n        }],\n        deptId: [{\n          required: true,\n          message: '请选择挂号科室',\n          trigger: 'blur'\n        }],\n        levelId: [{\n          required: true,\n          message: '请选择挂好级别',\n          trigger: 'blur'\n        }],\n        doctorId: [{\n          required: true,\n          message: '请选择门诊医生',\n          trigger: 'blur'\n        }]\n      },\n      feeTypes: [{\n        typeId: 1,\n        typeName: '医保卡'\n      }, {\n        typeId: 2,\n        typeName: '现金'\n      }, {\n        typeId: 3,\n        typeName: '微信'\n      }, {\n        typeId: 4,\n        typeName: '支付宝'\n      }],\n      deptList: [],\n      levelList: [],\n      doctorList: []\n    };\n  },\n  methods: {\n    //\n    changeLevel(levelId) {\n      this.levelList.forEach(level => {\n        if (level.levelId == levelId) {\n          this.formData.registerAmount = level.levelAmount;\n        }\n      });\n    },\n    changeBook(needBook) {\n      if (needBook) {\n        this.formData.registerAmount++;\n      } else {\n        this.formData.registerAmount--;\n      }\n    },\n    selectDoctor() {\n      this.queryCondition.registerDate = this.formData.registerDate;\n      this.queryCondition.registerNoon = this.formData.registerNoon;\n      this.queryCondition.deptId = this.formData.deptId;\n      this.queryCondition.levelId = this.formData.levelId;\n      console.log(this.queryCondition);\n      this.$http.get('/api/doctor/listReg', {\n        params: this.queryCondition\n      }).then(res => {\n        this.doctorList = res.data.data.doctorList;\n      });\n    },\n    addRegister() {\n      this.$http.post('/api/register/add', this.formData).then(res => {\n        if (res.data.status == 1) {\n          this.$message.success(res.data.message);\n          this.formData = {};\n        } else {\n          this.$message.error(res.data.message);\n        }\n      });\n    }\n  },\n  mounted() {\n    this.$http.get('/api/dept/listAll/1').then(res => {\n      this.deptList = res.data.data.deptList;\n    });\n    this.$http.get('/api/level/listAll').then(res => {\n      this.levelList = res.data.data.levelList;\n    });\n  }\n};","map":{"version":3,"names":["data","queryCondition","registerDate","registerNoon","deptId","levelId","formData","patientName","patientGender","settleMode","feeMode","doctorId","needBook","registerAmount","formRules","required","message","trigger","max","feeTypes","typeId","typeName","deptList","levelList","doctorList","methods","changeLevel","forEach","level","levelAmount","changeBook","selectDoctor","console","log","$http","get","params","then","res","addRegister","post","status","$message","success","error","mounted"],"sources":["src/views/window/Register.vue"],"sourcesContent":["<template>\r\n\t<div>\r\n\t\t\r\n\t\t<!-- 面包屑导航 -->\r\n\t\t<el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n\t\t  <el-breadcrumb-item :to=\"{path: '/welcome'}\">首页</el-breadcrumb-item>\r\n\t\t  <el-breadcrumb-item>挂号收费</el-breadcrumb-item>\r\n\t\t  <el-breadcrumb-item>窗口挂号</el-breadcrumb-item>\r\n\t\t</el-breadcrumb>\r\n\t\t\r\n\t\t<!-- 卡片容器 -->\r\n\t\t<el-card>\r\n                <el-form :model=\"formData\" label-width=\"100px\" :rules=\"formRules\" ref=\"formRef\">\r\n                    <el-row>\r\n                    <el-col :span=\"12\">\r\n                        <el-form-item label=\"患者姓名\" prop=\"patientName\">\r\n                            <el-input v-model=\"formData.patientName\"></el-input>\r\n                        </el-form-item>\r\n                    </el-col>\r\n                    <el-col :span=\"12\">\r\n                        <el-form-item label=\"患者性别\" prop=\"patientName\">\r\n                            <el-radio-group v-model=\"formData.patientGender\">\r\n                                <el-radio label=\"男\">男</el-radio>\r\n                                <el-radio label=\"女\">女</el-radio>\r\n                            </el-radio-group>\r\n                        </el-form-item>\r\n                    </el-col>\r\n                    </el-row>\r\n                    <el-row>\r\n                        <el-col :span=\"12\">\r\n                            <el-form-item label=\"看诊日期\" prop=\"regiserDate\">\r\n                                <el-input v-model=\"formData.registerDate\" type=\"date\"></el-input>\r\n                            </el-form-item>\r\n                        </el-col>\r\n                        <el-col :span=\"12\">\r\n                            <el-form-item label=\"看诊午别\">\r\n                                <el-radio-group v-model=\"formData.registerNoon\">\r\n                                    <el-radio label=\"0\">上午</el-radio>\r\n                                    <el-radio label=\"1\">下午</el-radio>\r\n                                </el-radio-group>\r\n                            </el-form-item>\r\n                        </el-col>\r\n                    </el-row>\r\n                    <el-row>\r\n                        <el-col :span=\"12\">\r\n                            <el-form-item label=\"结算方式\">\r\n                                <el-radio-group v-model=\"formData.settleMode\">\r\n                                    <el-radio label=\"1\">医保</el-radio>\r\n                                    <el-radio label=\"2\">自费</el-radio>\r\n                                </el-radio-group>\r\n                            </el-form-item>\r\n                        </el-col>\r\n                        <el-col :span=\"12\">\r\n                            <el-form-item label=\"收费方式\" prop=\"feeMode\">\r\n                                <el-select v-model=\"formData.feeMode\" placeholder=\"请选择缴费方式\">\r\n                                    <el-option v-for=\"feeType in feeTypes\" :value=\"feeType.typeId\" :label=\"feeType.typeName\"/>\r\n                                </el-select>\r\n                            </el-form-item>\r\n                        </el-col>\r\n                    </el-row>\r\n                    <el-row>\r\n                        <el-col :span=\"12\">\r\n                            <el-form-item label=\"挂号科室\">\r\n                                <el-select v-model=\"formData.deptId\" placeholder=\"请选择科室类型\" prop=\"deptId\">\r\n                                    <el-option v-for=\"dept in deptList\" :value=\"dept.deptId\" :label=\"dept.deptName\"/>\r\n                                </el-select>\r\n                            </el-form-item>\r\n                        </el-col>\r\n                        <el-col :span=\"12\">\r\n                            <el-form-item label=\"挂号级别\">\r\n                                <el-select v-model=\"formData.levelId\" placeholder=\"请选择挂号级别\" prop=\"levelId\" @change=\"changeLevel\">\r\n                                    <el-option v-for=\"level in levelList\" :value=\"level.levelId\" :label=\"level.levelName\"/>\r\n                                </el-select>\r\n                            </el-form-item>\r\n                        </el-col>\r\n                    </el-row>\r\n                    <el-row>\r\n                        <el-col :span=\"8\">\r\n                            <el-form-item label=\"医生列表\">\r\n                                <el-select v-model=\"formData.doctorId\" placeholder=\"请选择医生\" prop=\"doctorId\">\r\n                                    <el-option v-for=\"doctor in doctorList\" :value=\"doctor.doctorId\" :label=\"doctor.doctorName\"/>\r\n                                </el-select>\r\n                            </el-form-item>\r\n                        </el-col>\r\n                        <el-col :span=\"4\">\r\n                            <el-button type=\"primary\" @click=\"selectDoctor\">选择医生</el-button>\r\n                        </el-col>\r\n                        <el-col :span=\"4\">\r\n                           <el-form-item label=\"病历本\">\r\n                               <el-switch v-model=\"formData.needBook\" @change=\"changeBook\"/>\r\n                           </el-form-item>\r\n                        </el-col>\r\n                        <el-col :span=\"4\">\r\n                            <el-tag>挂号金额：{{formData.registerAmount}}元</el-tag>\r\n                        </el-col>\r\n                        <el-col :span=\"4\">\r\n                            <el-button type=\"primary\" @click=\"addRegister\">挂号</el-button>\r\n                        </el-col>\r\n                    </el-row>\r\n                </el-form>\r\n        </el-card>\r\n\t\t\r\n\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\texport default {\r\n\r\n        data() {\r\n\r\n            return {\r\n\r\n                //分页对象！\r\n\r\n\r\n                //查询条件对象\r\n                queryCondition: {\r\n\r\n                    registerDate: '',\r\n                    registerNoon: '',\r\n                    deptId: '',\r\n                    levelId: '',\r\n\r\n                },\r\n\r\n\r\n                //表单数据对象\r\n                formData: {\r\n                    patientName: '',\r\n                    patientGender: '',\r\n                    registerDate: '',\r\n                    registerNoon: '',\r\n                    settleMode: '',\r\n                    feeMode: '',\r\n                    deptId: '',\r\n                    levelId: '',\r\n                    doctorId: '',\r\n                    needBook: '',\r\n                    registerAmount: 0,\r\n                },\r\n\r\n                //表单数据校验规则对象\r\n                formRules: {\r\n                    patientName: [\r\n                        {required: true, message: '请输入患者姓名', trigger: 'blur'},\r\n                        {max: 10, message: '患者姓名的长度不能超过10个字符', trigger: 'blur'}\r\n                    ],\r\n                    registerDate: [\r\n                        {required: true, message: '请选择看诊日期', trigger: 'blur'},\r\n                    ],\r\n                    feeMode: [\r\n                        {required: true, message: '请选择收费方式', trigger: 'blur'},\r\n                    ],\r\n                    deptId: [\r\n                        {required: true, message: '请选择挂号科室', trigger: 'blur'},\r\n                    ],\r\n                    levelId: [\r\n                        {required: true, message: '请选择挂好级别', trigger: 'blur'},\r\n                    ],\r\n                    doctorId: [\r\n                        {required: true, message: '请选择门诊医生', trigger: 'blur'},\r\n                    ],\r\n                },\r\n                feeTypes: [\r\n                    {typeId: 1, typeName: '医保卡'},\r\n                    {typeId: 2, typeName: '现金'},\r\n                    {typeId: 3, typeName: '微信'},\r\n                    {typeId: 4, typeName: '支付宝'},\r\n                ],\r\n                deptList: [],\r\n                levelList: [],\r\n                doctorList: [],\r\n\r\n\r\n            }\r\n        },\r\n\r\n        methods: {\r\n            //\r\n            changeLevel(levelId) {\r\n                this.levelList.forEach(level => {\r\n                    if (level.levelId == levelId) {\r\n                        this.formData.registerAmount = level.levelAmount\r\n                    }\r\n                })\r\n            },\r\n\r\n            changeBook(needBook) {\r\n                if (needBook) {\r\n                    this.formData.registerAmount++;\r\n                } else {\r\n                    this.formData.registerAmount--\r\n                }\r\n            },\r\n            selectDoctor() {\r\n                this.queryCondition.registerDate = this.formData.registerDate\r\n                this.queryCondition.registerNoon = this.formData.registerNoon\r\n                this.queryCondition.deptId = this.formData.deptId\r\n                this.queryCondition.levelId = this.formData.levelId\r\n                console.log(this.queryCondition)\r\n                this.$http.get('/api/doctor/listReg', {params: this.queryCondition}).then(\r\n                    res => {\r\n                        this.doctorList = res.data.data.doctorList\r\n                    }\r\n                )\r\n            },\r\n            addRegister() {\r\n                this.$http.post('/api/register/add', this.formData).then(\r\n                    res => {\r\n                        if (res.data.status == 1) {\r\n                            this.$message.success(res.data.message)\r\n                            this.formData = {}\r\n                        } else {\r\n                            this.$message.error(res.data.message)\r\n                        }\r\n                    }\r\n                )\r\n            },\r\n\r\n        },\r\n        mounted() {\r\n            this.$http.get('/api/dept/listAll/1').then(\r\n                res => {\r\n                    this.deptList=res.data.data.deptList\r\n                }\r\n            )\r\n            this.$http.get('/api/level/listAll').then(\r\n                res => {\r\n                    this.levelList=res.data.data.levelList\r\n                }\r\n            )\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n.add-button{\r\n\tposition: absolute;\r\n\tright: 40px;\r\n}\r\n.delete-button{\r\n\tposition: absolute;\r\n\tright: 200px;\r\n}\r\n</style>\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}