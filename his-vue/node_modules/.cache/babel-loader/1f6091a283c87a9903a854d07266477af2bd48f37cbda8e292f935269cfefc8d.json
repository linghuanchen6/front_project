{"ast":null,"code":"import _regeneratorRuntime from \"F:/HIS/his-vue/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"F:/HIS/his-vue/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.for-each.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nexport default {\n  data: function data() {\n    return {\n      checkVOList: [],\n      registerId: '',\n      drugVOList: []\n    };\n  },\n  methods: {\n    //\n    getCheckList: function getCheckList() {\n      var _this = this;\n      this.$http.get('/api/request/list/' + this.registerId).then(function (res) {\n        _this.checkVOList = res.data.data.checkVOList;\n        console.log(_this.checkVOList);\n      });\n      this.$http.get('/api/prescription/list/' + this.registerId + '/1').then(function (res) {\n        _this.drugVOList = res.data.data.drugVOList;\n      });\n    },\n    charge: function charge() {\n      var _this2 = this;\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var result;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _this2.$confirm('是否确定缴费【' + _this2.totalAmount + '】元', '缴费确定');\n            case 2:\n              result = _context.sent;\n              if (result == 'confirm') {\n                _this2.$http.put('/api/request/fee/' + _this2.registerId).then(function (res) {\n                  if (res.data.status == 1) {\n                    _this2.$message.success(res.data.message);\n                    _this2.registerId = '';\n                    _this2.checkVOList = [];\n                  } else {\n                    _this2.$message.error(res.data.message);\n                  }\n                });\n              }\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      }))();\n    },\n    chargeDrug: function chargeDrug() {\n      var _this3 = this;\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var result;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return _this3.$confirm('是否确定药品缴费【' + _this3.totalAmountDrug + '】元', '缴费确认');\n            case 2:\n              result = _context2.sent;\n              if (result == 'confirm') {\n                _this3.$http.put('/api/prescription/fee/' + _this3.registerId).then(function (res) {\n                  if (res.data.status == 1) {\n                    _this3.$message.success(res.data.message);\n                    _this3.registerId = '';\n                    _this3.drugVOList = [];\n                  } else {\n                    _this3.$message.error(res.data.message);\n                  }\n                });\n              }\n            case 4:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2);\n      }))();\n    }\n  },\n  computed: {\n    totalAmount: function totalAmount() {\n      var checkAmount = 0;\n      this.checkVOList.forEach(function (checkVO) {\n        checkAmount += checkVO.checkAmount;\n      });\n      return checkAmount;\n    },\n    totalAmountDrug: function totalAmountDrug() {\n      var drugAmount = 0;\n      this.drugVOList.forEach(function (drugVO) {\n        console.log(drugVO);\n        drugAmount += drugVO.totalPrice;\n      });\n      return drugAmount;\n    }\n  },\n  mounted: function mounted() {}\n};","map":{"version":3,"names":["data","checkVOList","registerId","drugVOList","methods","getCheckList","_this","$http","get","then","res","console","log","charge","_this2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","result","wrap","_callee$","_context","prev","next","$confirm","totalAmount","sent","put","status","$message","success","message","error","stop","chargeDrug","_this3","_callee2","_callee2$","_context2","totalAmountDrug","computed","checkAmount","forEach","checkVO","drugAmount","drugVO","totalPrice","mounted"],"sources":["src/views/window/Fee.vue"],"sourcesContent":["<template>\r\n\t<div>\r\n\t\t\r\n\t\t<!-- 面包屑导航 -->\r\n\t\t<el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n\t\t  <el-breadcrumb-item :to=\"{path: '/welcome'}\">首页</el-breadcrumb-item>\r\n\t\t  <el-breadcrumb-item>挂号收费</el-breadcrumb-item>\r\n\t\t  <el-breadcrumb-item>窗口收费</el-breadcrumb-item>\r\n\t\t</el-breadcrumb>\r\n\t\t\r\n\t\t<!-- 卡片容器 -->\r\n\t\t<el-card>\r\n\t\t\t\r\n\t\t\t<!--查询条件-->\r\n\t\t\t<el-input v-model=\"registerId\" placeholder=\"请输入病历号\" style=\"width: 200px;\"/>\r\n\t\t\t<el-button type=\"primary\" @click=\"getCheckList\" >查询</el-button>\r\n\r\n\t\t\t\r\n\t\t\t<!-- 数据表格 -->\r\n\t\t\t<el-table :data=\"checkVOList\" stripe border>\r\n\r\n        <el-table-column type=\"index\" align=\"center\" width=\"100\"/>\r\n        <el-table-column prop=\"checkName\" label=\"检查项目名称\"/>\r\n        <el-table-column prop=\"checkAmount\" label=\"检查项目费用\"/>\r\n        <el-table-column prop=\"checkTime\" label=\"检查项目时间\"/>\r\n\r\n      </el-table>\r\n      <el-tag>总计金额：{{totalAmount}}元</el-tag>\r\n      <el-button type=\"primary\" @click=\"charge\" :disabled=\"checkVOList.length==0\">立即缴费</el-button>\r\n\r\n      <el-table :data=\"drugVOList\" stripe border>\r\n\r\n        <el-table-column type=\"index\" label=\"序号\" align=\"center\" width=\"100\"/>\r\n        <el-table-column prop=\"drugName\" label=\"药品名称\"/>\r\n        <el-table-column prop=\"drugPrice\" label=\"药品单价\"/>\r\n        <el-table-column prop=\"quantity\" label=\"药品数量\"/>\r\n        <el-table-column prop=\"totalPrice\" label=\"价格小计(元)\"/>\r\n        <el-table-column prop=\"createTime\" label=\"开药时间\"/>\r\n\r\n      </el-table>\r\n\r\n      <el-tag>总计金额：{{totalAmountDrug}}元</el-tag>\r\n\r\n      <el-button type=\"primary\" @click=\"chargeDrug\" :disabled=\"drugVOList.length==0\">立即缴费</el-button>\r\n\t\t</el-card>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\texport default {\r\n\r\n      data() {\r\n          return {\r\n            checkVOList: [],\r\n            registerId: '',\r\n            drugVOList:[],\r\n          }\r\n      },\r\n\r\n        methods: {\r\n            //\r\n            getCheckList() {\r\n                this.$http.get('/api/request/list/'+ this.registerId).then(\r\n\r\n                    res => {\r\n                      this.checkVOList = res.data.data.checkVOList\r\n                      console.log(this.checkVOList)\r\n                    }\r\n                )\r\n\r\n              this.$http.get('/api/prescription/list/' + this.registerId + '/1').then(\r\n                  res => {\r\n                    this.drugVOList = res.data.data.drugVOList\r\n                  }\r\n              )\r\n            },\r\n\r\n            async charge() {\r\n                const result = await this.$confirm('是否确定缴费【' + this.totalAmount + '】元', '缴费确定');\r\n                if (result == 'confirm') {\r\n                    this.$http.put('/api/request/fee/' + this.registerId).then(\r\n                        res => {\r\n                            if (res.data.status == 1) {\r\n                                this.$message.success(res.data.message)\r\n                                this.registerId = ''\r\n                                this.checkVOList = []\r\n                            } else {\r\n                                this.$message.error(res.data.message)\r\n                            }\r\n                        }\r\n                    )\r\n                }\r\n            },\r\n\r\n            async chargeDrug(){\r\n              const  result = await this.$confirm('是否确定药品缴费【' + this.totalAmountDrug + '】元','缴费确认' )\r\n\r\n              if(result == 'confirm'){\r\n\r\n                this.$http.put('/api/prescription/fee/' + this.registerId).then(\r\n                    res => {\r\n                      if(res.data.status == 1){\r\n                        this.$message.success(res.data.message)\r\n\r\n                        this.registerId = ''\r\n\r\n                        this.drugVOList = []\r\n                      }else {\r\n                        this.$message.error(res.data.message)\r\n                      }\r\n                    }\r\n                )\r\n              }\r\n            }\r\n        },\r\n        computed: {\r\n            totalAmount() {\r\n                let checkAmount = 0\r\n                this.checkVOList.forEach(checkVO => {\r\n                        checkAmount += checkVO.checkAmount\r\n                    }\r\n                )\r\n                return checkAmount\r\n            },\r\n\r\n          totalAmountDrug(){\r\n\r\n              let drugAmount = 0\r\n\r\n            this.drugVOList.forEach(drugVO => {\r\n              console.log(drugVO)\r\n              drugAmount += drugVO.totalPrice\r\n            })\r\n\r\n            return drugAmount\r\n          }\r\n        },\r\n        mounted() {\r\n\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    .el-tag{\r\n        margin: 0px 60px;\r\n    }\r\n</style>\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}