{"ast":null,"code":"export default {\n  data() {\n    return {\n      checkVOList: [],\n      registerId: ''\n    };\n  },\n  methods: {\n    //\n    getCheckList() {\n      this.$http.get('/api/request/list/' + this.registerId).then(res => {\n        this.checkVOList = res.data.data.checkVOList;\n        console.log(this.checkVOList);\n      });\n    },\n    async charge() {\n      const result = await this.$confirm('是否确定缴费【' + this.totalAmount + '】元', '缴费确定');\n      if (result == 'confirm') {\n        this.$http.put('/api/request/fee/' + this.registerId).then(res => {\n          if (res.data.status == 1) {\n            this.$message.success(res.data.message);\n            this.registerId = '';\n            this.checkVOList = [];\n          } else {\n            this.$message.error(res.data.message);\n          }\n        });\n      }\n    }\n  },\n  computed: {\n    totalAmount() {\n      let checkAmount = 0;\n      this.checkVOList.forEach(checkVO => {\n        checkAmount += checkVO.checkAmount;\n      });\n      return checkAmount;\n    }\n  },\n  mounted() {}\n};","map":{"version":3,"names":["data","checkVOList","registerId","methods","getCheckList","$http","get","then","res","console","log","charge","result","$confirm","totalAmount","put","status","$message","success","message","error","computed","checkAmount","forEach","checkVO","mounted"],"sources":["src/views/window/Fee.vue"],"sourcesContent":["<template>\r\n\t<div>\r\n\t\t\r\n\t\t<!-- 面包屑导航 -->\r\n\t\t<el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n\t\t  <el-breadcrumb-item :to=\"{path: '/welcome'}\">首页</el-breadcrumb-item>\r\n\t\t  <el-breadcrumb-item>挂号收费</el-breadcrumb-item>\r\n\t\t  <el-breadcrumb-item>窗口收费</el-breadcrumb-item>\r\n\t\t</el-breadcrumb>\r\n\t\t\r\n\t\t<!-- 卡片容器 -->\r\n\t\t<el-card>\r\n\t\t\t\r\n\t\t\t<!--查询条件-->\r\n\t\t\t<el-input v-model=\"registerId\" placeholder=\"请输入病历号\" style=\"width: 200px;\"/>\r\n\t\t\t<el-button type=\"primary\" @click=\"getCheckList\" >查询</el-button>\r\n\r\n\t\t\t\r\n\t\t\t<!-- 数据表格 -->\r\n\t\t\t<el-table :data=\"checkVOList\" stripe border>\r\n                <el-table-column type=\"index\" align=\"center\" width=\"100\"/>\r\n                <el-table-column prop=\"checkName\" label=\"检查项目名称\"/>\r\n                <el-table-column prop=\"checkAmount\" label=\"检查项目费用\"/>\r\n                <el-table-column prop=\"checkTime\" label=\"检查项目时间\"/>\r\n\r\n\r\n\t\t\t    </el-table>\r\n\t\t\t\t<el-tag>总计金额：{{totalAmount}}元</el-tag>\r\n            <el-button type=\"primary\" @click=\"charge\" :disabled=\"checkVOList.length==0\">立即缴费</el-button>\r\n\t\t</el-card>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\texport default {\r\n\r\n      data() {\r\n          return {\r\n            checkVOList: [],\r\n            registerId: '',\r\n          }\r\n      },\r\n\r\n        methods: {\r\n            //\r\n            getCheckList() {\r\n                this.$http.get('/api/request/list/'+ this.registerId).then(\r\n\r\n                    res => {\r\n                      this.checkVOList = res.data.data.checkVOList\r\n                      console.log(this.checkVOList)\r\n                    }\r\n                )\r\n            },\r\n\r\n            async charge() {\r\n                const result = await this.$confirm('是否确定缴费【' + this.totalAmount + '】元', '缴费确定');\r\n                if (result == 'confirm') {\r\n                    this.$http.put('/api/request/fee/' + this.registerId).then(\r\n                        res => {\r\n                            if (res.data.status == 1) {\r\n                                this.$message.success(res.data.message)\r\n                                this.registerId = ''\r\n                                this.checkVOList = []\r\n                            } else {\r\n                                this.$message.error(res.data.message)\r\n                            }\r\n                        }\r\n                    )\r\n                }\r\n            },\r\n\r\n        },\r\n        computed: {\r\n            totalAmount() {\r\n                let checkAmount = 0\r\n                this.checkVOList.forEach(checkVO => {\r\n                        checkAmount += checkVO.checkAmount\r\n                    }\r\n                )\r\n                return checkAmount\r\n            },\r\n        },\r\n        mounted() {\r\n\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    .el-tag{\r\n        margin: 0px 60px;\r\n    }\r\n</style>\r\n"],"mappings":"AAkCA;EAEAA,KAAA;IACA;MACAC,WAAA;MACAC,UAAA;IACA;EACA;EAEAC,OAAA;IACA;IACAC,aAAA;MACA,KAAAC,KAAA,CAAAC,GAAA,6BAAAJ,UAAA,EAAAK,IAAA,CAEAC,GAAA;QACA,KAAAP,WAAA,GAAAO,GAAA,CAAAR,IAAA,CAAAA,IAAA,CAAAC,WAAA;QACAQ,OAAA,CAAAC,GAAA,MAAAT,WAAA;MACA,CACA;IACA;IAEA,MAAAU,OAAA;MACA,MAAAC,MAAA,cAAAC,QAAA,kBAAAC,WAAA;MACA,IAAAF,MAAA;QACA,KAAAP,KAAA,CAAAU,GAAA,4BAAAb,UAAA,EAAAK,IAAA,CACAC,GAAA;UACA,IAAAA,GAAA,CAAAR,IAAA,CAAAgB,MAAA;YACA,KAAAC,QAAA,CAAAC,OAAA,CAAAV,GAAA,CAAAR,IAAA,CAAAmB,OAAA;YACA,KAAAjB,UAAA;YACA,KAAAD,WAAA;UACA;YACA,KAAAgB,QAAA,CAAAG,KAAA,CAAAZ,GAAA,CAAAR,IAAA,CAAAmB,OAAA;UACA;QACA,CACA;MACA;IACA;EAEA;EACAE,QAAA;IACAP,YAAA;MACA,IAAAQ,WAAA;MACA,KAAArB,WAAA,CAAAsB,OAAA,CAAAC,OAAA;QACAF,WAAA,IAAAE,OAAA,CAAAF,WAAA;MACA,CACA;MACA,OAAAA,WAAA;IACA;EACA;EACAG,QAAA,GAEA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}