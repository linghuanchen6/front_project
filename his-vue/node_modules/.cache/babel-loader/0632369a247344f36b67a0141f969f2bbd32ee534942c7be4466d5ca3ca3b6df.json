{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  data() {\n    return {\n      registerList: [],\n      //查询条件   疾病名称 编码\n      queryCondition: {\n        registerId: '',\n        patientName: '',\n        status: 1\n      },\n      //看诊状态数组\n      statuses: [{\n        statusId: 1,\n        statusName: '新挂号'\n      }, {\n        statusId: 2,\n        statusName: '已接诊'\n      }, {\n        statusId: 3,\n        statusName: '看诊结束'\n      }],\n      newCount: 0,\n      receiveCount: 0,\n      finishCount: 0,\n      totalCount: 0\n    };\n  },\n  methods: {\n    getRegisterList() {\n      this.$http.get('/api/register/list', {\n        params: this.queryCondition\n      }).then(res => {\n        this.registerList = res.data.data.registerList;\n        console.log(this.registerList);\n        this.registerList.forEach(register => {\n          if (register.status == 1) {\n            register.status = '新挂号';\n          } else if (register.status == 2) {\n            register.status = '已接诊';\n          } else {\n            register.status = '看诊结束';\n          }\n        });\n      });\n    },\n    getRegisterCount() {\n      this.$http.get('/api/register/count').then(res => {\n        this.newCount = res.data.data.newCount;\n        this.receiveCount = res.data.data.receiveCount;\n        this.finishCount = res.data.data.finishCount;\n        this.totalCount = res.data.data.totalCount;\n      });\n    },\n    receive(register) {\n      this.$router.push({\n        path: '/addCheck',\n        query: {\n          register: register\n        }\n      });\n    }\n  },\n  mounted() {\n    this.getRegisterList();\n    this.getRegisterCount();\n\n    // window.setInterval(()=>{this.getRegisterCount()},1000*5)\n  }\n};","map":{"version":3,"names":["data","registerList","queryCondition","registerId","patientName","status","statuses","statusId","statusName","newCount","receiveCount","finishCount","totalCount","methods","getRegisterList","$http","get","params","then","res","console","log","forEach","register","getRegisterCount","receive","$router","push","path","query","mounted"],"sources":["src/views/treat/Receive.vue"],"sourcesContent":["<template>\r\n    <div>\r\n\r\n        <!--面包屑导航-->\r\n        <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n            <el-breadcrumb-item :to=\"{ path: '/welcome' }\">首页</el-breadcrumb-item>\r\n            <el-breadcrumb-item>医生诊疗</el-breadcrumb-item>\r\n            <el-breadcrumb-item>医生接诊</el-breadcrumb-item>\r\n        </el-breadcrumb>\r\n\r\n        <!--卡片-->\r\n        <el-card>\r\n\r\n            <!--查询条件-->\r\n            <el-input v-model=\"queryCondition.registerId\" placeholder=\"病历号\" style=\"width: 250px\"/>\r\n            <el-input v-model=\"queryCondition.patientName\" placeholder=\"患者姓名\" style=\"width: 250px\" />\r\n            <el-select v-model=\"queryCondition.status\" placeholder=\"请选择看诊状态\" style=\"width: 220px;margin-right: 20px\">\r\n                <el-option label=\"全部状态\" value=\"\"></el-option>\r\n                <el-option\r\n                        v-for=\"status in statuses\"\r\n                        :value=\"status.statusId\"\r\n                        :label=\"status.statusName\">\r\n                </el-option>\r\n            </el-select>\r\n\r\n            <el-button type=\"primary\" @click=\"getRegisterList\">查询</el-button>\r\n\r\n\r\n            <!--数据表格-->\r\n            <el-table\r\n                    :data=\"registerList\"\r\n                    style=\"width: 80%\"\r\n                    stripe\r\n                    border\r\n            >\r\n                <el-table-column type=\"index\" align=\"center\"/>\r\n                <el-table-column prop=\"registerId\" label=\"病历号\"/>\r\n\r\n                <el-table-column prop=\"patientName\" label=\"患者姓名\" />\r\n                <el-table-column prop=\"patientGender\" label=\"患者性别\"/>\r\n                <el-table-column prop=\"status\" label=\"看诊状态\"/>\r\n\r\n                <el-table-column label=\"操作\" align=\"center\">\r\n                    <template slot-scope=\"scope\" >\r\n                        <!--把register整个对象传递-->\r\n                        <el-button type=\"primary\" size=\"small\" @click=\"receive(scope.row)\" v-if=\"scope.row.status == '新挂号' \">接诊</el-button>\r\n\r\n                    </template>\r\n                </el-table-column>\r\n\r\n            </el-table>\r\n\r\n            <el-row>\r\n                <el-col :span=\"5\"><el-tag type=\"primary\">新挂号：{{newCount}}</el-tag></el-col>\r\n                <el-col :span=\"5\"><el-tag type=\"success\">已接诊：{{receiveCount}}</el-tag></el-col>\r\n                <el-col :span=\"5\"><el-tag type=\"warning\">已结束：{{finishCount}}</el-tag></el-col>\r\n                <el-col :span=\"5\"><el-tag type=\"danger\">合计：{{totalCount}}</el-tag></el-col>\r\n            </el-row>\r\n\r\n\r\n        </el-card>\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        data() {\r\n            return {\r\n\r\n                registerList: [],\r\n\r\n                //查询条件   疾病名称 编码\r\n                queryCondition:{\r\n                    registerId: '',\r\n                    patientName: '',\r\n                    status: 1,\r\n                },\r\n\r\n\r\n                //看诊状态数组\r\n                statuses:[\r\n                    { statusId: 1, statusName: '新挂号'},\r\n                    { statusId: 2, statusName: '已接诊'},\r\n                    { statusId: 3, statusName: '看诊结束'},\r\n                ],\r\n\r\n                newCount:0,\r\n                receiveCount:0,\r\n                finishCount:0,\r\n                totalCount:0,\r\n            }\r\n        },\r\n\r\n        methods:{\r\n\r\n            getRegisterList(){\r\n\r\n                this.$http.get('/api/register/list' ,{params: this.queryCondition}).then(\r\n\r\n                    res =>{\r\n                        this.registerList = res.data.data.registerList\r\n                        console.log(this.registerList)\r\n                        this.registerList.forEach(register =>{\r\n                            if (register.status == 1){\r\n                                register.status = '新挂号'\r\n                            } else if (register.status == 2) {\r\n                                register.status = '已接诊'\r\n                            } else {\r\n                                register.status = '看诊结束'\r\n                            }\r\n                        })\r\n                    }\r\n                )\r\n            },\r\n\r\n            getRegisterCount(){\r\n\r\n\r\n                this.$http.get('/api/register/count').then(\r\n\r\n                    res =>{\r\n                        this.newCount = res.data.data.newCount\r\n                        this.receiveCount = res.data.data.receiveCount\r\n                        this.finishCount = res.data.data.finishCount\r\n                        this.totalCount = res.data.data.totalCount\r\n\r\n\r\n                    }\r\n                )\r\n            },\r\n\r\n            receive(register){\r\n\r\n                this.$router.push({path: '/addCheck' , query:{register: register}})\r\n\r\n            },\r\n\r\n        },\r\n\r\n        mounted(){\r\n\r\n            this.getRegisterList()\r\n\r\n            this.getRegisterCount()\r\n\r\n            // window.setInterval(()=>{this.getRegisterCount()},1000*5)\r\n\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n    .el-tag{\r\n        margin: 0 60px;\r\n    }\r\n\r\n</style>"],"mappings":";AAkEA;EACAA,KAAA;IACA;MAEAC,YAAA;MAEA;MACAC,cAAA;QACAC,UAAA;QACAC,WAAA;QACAC,MAAA;MACA;MAGA;MACAC,QAAA,GACA;QAAAC,QAAA;QAAAC,UAAA;MAAA,GACA;QAAAD,QAAA;QAAAC,UAAA;MAAA,GACA;QAAAD,QAAA;QAAAC,UAAA;MAAA,EACA;MAEAC,QAAA;MACAC,YAAA;MACAC,WAAA;MACAC,UAAA;IACA;EACA;EAEAC,OAAA;IAEAC,gBAAA;MAEA,KAAAC,KAAA,CAAAC,GAAA;QAAAC,MAAA,OAAAf;MAAA,GAAAgB,IAAA,CAEAC,GAAA;QACA,KAAAlB,YAAA,GAAAkB,GAAA,CAAAnB,IAAA,CAAAA,IAAA,CAAAC,YAAA;QACAmB,OAAA,CAAAC,GAAA,MAAApB,YAAA;QACA,KAAAA,YAAA,CAAAqB,OAAA,CAAAC,QAAA;UACA,IAAAA,QAAA,CAAAlB,MAAA;YACAkB,QAAA,CAAAlB,MAAA;UACA,WAAAkB,QAAA,CAAAlB,MAAA;YACAkB,QAAA,CAAAlB,MAAA;UACA;YACAkB,QAAA,CAAAlB,MAAA;UACA;QACA;MACA,CACA;IACA;IAEAmB,iBAAA;MAGA,KAAAT,KAAA,CAAAC,GAAA,wBAAAE,IAAA,CAEAC,GAAA;QACA,KAAAV,QAAA,GAAAU,GAAA,CAAAnB,IAAA,CAAAA,IAAA,CAAAS,QAAA;QACA,KAAAC,YAAA,GAAAS,GAAA,CAAAnB,IAAA,CAAAA,IAAA,CAAAU,YAAA;QACA,KAAAC,WAAA,GAAAQ,GAAA,CAAAnB,IAAA,CAAAA,IAAA,CAAAW,WAAA;QACA,KAAAC,UAAA,GAAAO,GAAA,CAAAnB,IAAA,CAAAA,IAAA,CAAAY,UAAA;MAGA,CACA;IACA;IAEAa,QAAAF,QAAA;MAEA,KAAAG,OAAA,CAAAC,IAAA;QAAAC,IAAA;QAAAC,KAAA;UAAAN,QAAA,EAAAA;QAAA;MAAA;IAEA;EAEA;EAEAO,QAAA;IAEA,KAAAhB,eAAA;IAEA,KAAAU,gBAAA;;IAEA;EAEA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}