{"ast":null,"code":"import \"core-js/modules/es.array.for-each.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nexport default {\n  //组件使用的数据\n  data: function data() {\n    return {\n      deptPage: {},\n      queryCondition: {\n        deptName: '',\n        deptType: '',\n        currentPage: 1,\n        pageSize: 10\n      },\n      OpenDialog: false,\n      formData: {\n        deptId: 0,\n        deptName: '',\n        deptType: ''\n      },\n      formRules: {\n        deptName: [{\n          required: true,\n          message: '请输入科室名称',\n          trigger: 'blur'\n        }, {\n          max: 10,\n          message: '科室名称的长度不能超过十个字符',\n          trigger: 'blur'\n        }],\n        deptType: [{\n          required: true,\n          message: '请输入科室类型',\n          trigger: 'blur'\n        }, {\n          trigger: 'blur'\n        }]\n      },\n      actionType: '',\n      depts: []\n    };\n  },\n  //事件处理方法\n  methods: {\n    getDeptList: function getDeptList() {\n      var _this = this;\n      this.$http.get('/api/dept/list', {\n        params: this.queryCondition\n      }).then(function (res) {\n        console.log(res);\n        _this.deptPage = res.data.data.deptPage;\n      });\n    },\n    add: function add() {\n      this.formData = {};\n      this.actionType = '添加科室';\n      this.OpenDialog = true;\n    },\n    handleSizeChange: function handleSizeChange(val) {\n      this.queryCondition.pageSize = val;\n      this.getDeptList();\n    },\n    handleCurrentChange: function handleCurrentChange(val) {\n      this.queryCondition.currentPage = val;\n      this.getDeptList();\n    },\n    handleSelectionChange: function handleSelectionChange(val) {\n      this.depts = val;\n    },\n    deleteBatch: function deleteBatch() {\n      var _this2 = this;\n      var deptIds = '';\n      var deptNames = '';\n      this.depts.forEach(function (dept) {\n        deptIds += dept.deptId + ',';\n        deptNames += dept.deptName + ',';\n      });\n      deptIds = deptIds.substring(0, deptIds.length - 1);\n      deptNames = deptNames.substring(0, deptNames.length - 1);\n      var result = this.$confirm('是否确认删除【' + deptNames + '】', '删除确认', {\n        confirmButtonText: '删除',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(function () {\n        console.log(deptIds);\n        _this2.$http[\"delete\"]('/api/dept/deleteBatch?deptIds=' + deptIds).then(function (res) {\n          if (res.data.status == 1) {\n            _this2.$message.success(res.data.message);\n            _this2.getDeptList();\n          } else {\n            _this2.$message.error(res.data.message);\n          }\n        });\n      })[\"catch\"](function () {});\n    },\n    addOrModify: function addOrModify() {\n      var _this3 = this;\n      this.$refs.formRef.validate(function (valid) {\n        if (valid) {\n          if (_this3.actionType == '添加科室') {\n            _this3.$http.post('/api/dept/add', _this3.formData).then(function (res) {\n              if (res.data.status == 1) {\n                _this3.$message.success(res.data.message);\n                _this3.getDeptList();\n              } else {\n                _this3.$message.error(res.data.message);\n              }\n            });\n          } else {\n            _this3.$http.put('/api/dept/modify', _this3.formData).then(function (res) {\n              if (res.data.status == 1) {\n                _this3.$message.success(res.data.message);\n                _this3.getDeptList();\n              } else {\n                _this3.$message.error(res.data.message);\n              }\n            });\n          }\n          _this3.OpenDialog = false;\n        } else {\n          _this3.$message.error(\"输入数据有误，请检查后再提交\");\n        }\n      });\n    },\n    modify: function modify(deptId) {\n      var _this4 = this;\n      this.$http.get('/api/dept/get/' + deptId).then(function (res) {\n        if (res.data.status == 1) {\n          _this4.formData = res.data.data.dept;\n          _this4.actionType = '修改科室';\n          _this4.OpenDialog = true;\n        } else {\n          _this4.$message.error(res.data.message);\n        }\n      });\n    },\n    remove: function remove(deptId, deptName) {\n      var _this5 = this;\n      this.$confirm('是否确认删除【' + deptName + '】', '删除确认', {\n        confirmButtonText: '删除',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(function () {\n        _this5.$http[\"delete\"]('/api/dept/remove/' + deptId).then(function (res) {\n          if (res.data.status == 1) {\n            _this5.$message.success(res.data.message);\n            _this5.getDeptList();\n          } else {\n            _this5.$message.error(res.data.message);\n          }\n        });\n      })[\"catch\"](function () {});\n    }\n  },\n  //页面加载时\n  mounted: function mounted() {\n    this.getDeptList();\n  }\n};","map":{"version":3,"names":["data","deptPage","queryCondition","deptName","deptType","currentPage","pageSize","OpenDialog","formData","deptId","formRules","required","message","trigger","max","actionType","depts","methods","getDeptList","_this","$http","get","params","then","res","console","log","add","handleSizeChange","val","handleCurrentChange","handleSelectionChange","deleteBatch","_this2","deptIds","deptNames","forEach","dept","substring","length","result","$confirm","confirmButtonText","cancelButtonText","type","status","$message","success","error","addOrModify","_this3","$refs","formRef","validate","valid","post","put","modify","_this4","remove","_this5","mounted"],"sources":["src/views/data/Dept.vue"],"sourcesContent":["<template>\n  <div>\n\n    <!-- 面包屑导航 -->\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\n      <el-breadcrumb-item :to=\"{path: '/welcome'}\">首页</el-breadcrumb-item>\n      <el-breadcrumb-item>基础数据</el-breadcrumb-item>\n      <el-breadcrumb-item>科室管理</el-breadcrumb-item>\n    </el-breadcrumb>\n\n    <!-- 卡片容器 -->\n    <el-card>\n\n      <el-input v-model=\"queryCondition.deptName\" placeholder=\"科室名称\" style=\"width: 250px\"></el-input>\n      <el-input v-model=\"queryCondition.deptType\" placeholder=\"科室类型\" style=\"width: 250px\"></el-input>\n      <el-button type=\"primary\" style=\"margin-left: 20px\" @click=\"getDeptList\">查询</el-button>\n      <el-button type=\"danger\" @click=\"deleteBatch\" >批量删除</el-button>\n      <el-button type=\"primary\"  @click=\"add\">添加科室</el-button>\n      <!-- 数据表格 -->\n      <el-table :data=\"deptPage.records\" style=\"width: 80%\" stripe border @selection-change=\"handleSelectionChange\">\n\n        <el-table-column type=\"selection\"/>\n        <el-table-column prop=\"deptId\" label=\"科室编号\">\n        </el-table-column>\n\n        <el-table-column prop=\"deptName\" label=\"科室名称\">\n        </el-table-column>\n\n        <el-table-column prop=\"deptType\" label=\"科室类型\">\n        </el-table-column>\n\n        <el-table-column label=\"操作\">\n          <template slot-scope=\"scope\">\n            <el-button type=\"primary\" size=\"mini\" icon=\"el-icon-edit\" @click=\"modify(scope.row.deptId)\" ></el-button>\n            <el-button type=\"danger\" size=\"mini\" icon=\"el-icon-delete\" @click=\"remove(scope.row.deptId,scope.row.deptName)\"></el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n      <el-pagination\n          @size-change=\"handleSizeChange\"\n          @current-change=\"handleCurrentChange\"\n          :current-page=\"queryCondition.currentPage\"\n          :page-sizes=\"[2, 4, 5, 10]\"\n          :page-size=\"queryCondition.pageSize\"\n          layout=\"total, sizes, prev, pager, next, jumper\"\n          :total=\"deptPage.total\">\n      </el-pagination>\n\n    </el-card>\n\n\n    <el-dialog :title=\"actionType\" :visible.sync=\"OpenDialog\" width=\"30%\" center>\n      <el-form :model=\"formData\" :rules=\"formRules\" ref=\"formRef\">\n        <el-form-item label=\"科室名称\" label-width=\"100px\" :label-width=\"deptName\">\n          <el-input v-model=\"formData.deptName\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"科室类型\" label-width=\"100px\" :label-width=\"deptType\">\n          <el-input v-model=\"formData.deptType\"></el-input>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\">\n        <el-button @click=\"OpenDialog = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"addOrModify\">确 定</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n<script>\n\nexport default{\n\n  //组件使用的数据\n  data(){\n    return{\n      deptPage:{},\n      queryCondition:{\n        deptName:'',\n        deptType:'',\n        currentPage:1,\n        pageSize:10,\n      },\n      OpenDialog:false,\n\n      formData:{\n        deptId:0,\n        deptName:'',\n        deptType:'',\n      },\n      formRules:{\n        deptName:[\n          { required:true, message:'请输入科室名称',trigger:'blur'},\n          { max:10, message: '科室名称的长度不能超过十个字符',trigger:'blur'}\n        ],\n\n        deptType:[\n          { required:true, message:'请输入科室类型',trigger:'blur'},\n          { trigger:'blur'}\n        ]\n      },\n      actionType:'',\n      depts:[],\n    }\n  },\n\n  //事件处理方法\n  methods: {\n    getDeptList(){\n      this.$http.get('/api/dept/list', {params:this.queryCondition}).then(\n          res => {\n            console.log(res)\n            this.deptPage = res.data.data.deptPage\n          }\n      )\n    },\n    add(){\n      this.formData={}\n\n      this.actionType='添加科室'\n\n      this.OpenDialog=true\n    },\n    handleSizeChange(val) {\n      this.queryCondition.pageSize = val;\n      this.getDeptList();\n    },\n    handleCurrentChange(val) {\n      this.queryCondition.currentPage = val;\n      this.getDeptList();\n    },\n\n    handleSelectionChange(val){\n      this.depts = val\n    },\n\n    deleteBatch(){\n\n      let deptIds = ''\n      let deptNames = ''\n\n      this.depts.forEach( dept => {\n        deptIds += dept.deptId + ','\n        deptNames += dept.deptName + ','\n      })\n\n      deptIds = deptIds.substring(0, deptIds.length - 1)\n      deptNames = deptNames.substring(0, deptNames.length - 1)\n\n      const result = this.$confirm(\n          '是否确认删除【' + deptNames + '】','删除确认',\n          {\n            confirmButtonText:'删除',\n            cancelButtonText:'取消',\n            type:'warning'\n          }\n      ).then(() => {\n        console.log(deptIds)\n        this.$http.delete('/api/dept/deleteBatch?deptIds='+deptIds).then(\n            res => {\n              if(res.data.status == 1){\n                this.$message.success(res.data.message)\n\n                this.getDeptList()\n              }else{\n                this.$message.error(res.data.message)\n              }\n            }\n        )\n      }).catch(() => {})\n    },\n    addOrModify(){\n      this.$refs.formRef.validate(\n          valid =>{\n            if(valid){\n              if(this.actionType=='添加科室'){\n                this.$http.post('/api/dept/add', this.formData).then(\n                    res => {\n                      if(res.data.status == 1){\n                        this.$message.success(res.data.message)\n\n                        this.getDeptList()\n                      }else{\n                        this.$message.error(res.data.message)\n                      }\n                    }\n                )\n              }else{\n                this.$http.put('/api/dept/modify', this.formData).then(\n                    res => {\n                      if(res.data.status == 1){\n                        this.$message.success(res.data.message)\n\n                        this.getDeptList()\n                      }else{\n                        this.$message.error(res.data.message)\n                      }\n                    }\n                )\n              }\n              this.OpenDialog= false\n            }else{\n              this.$message.error(\"输入数据有误，请检查后再提交\")\n            }\n          }\n      )\n    },\n    modify(deptId){\n      this.$http.get('/api/dept/get/'+deptId).then(\n          res => {\n            if(res.data.status == 1){\n              this.formData = res.data.data.dept;\n\n              this.actionType='修改科室';\n\n              this.OpenDialog=true;\n\n            }else{\n              this.$message.error(res.data.message)\n            }\n          }\n      )\n    },\n    remove(deptId, deptName){\n\n      this.$confirm(\n          '是否确认删除【'+deptName+'】','删除确认',\n          {\n            confirmButtonText:'删除',\n            cancelButtonText:'取消',\n            type:'warning'\n          }\n      ).then(() => {\n        this.$http.delete('/api/dept/remove/'+deptId).then(\n            res => {\n              if(res.data.status == 1){\n                this.$message.success(res.data.message)\n\n                this.getDeptList()\n              }else{\n                this.$message.error(res.data.message)\n              }\n            }\n        )\n      }).catch(() => {})\n    },\n  },\n\n  //页面加载时\n  mounted(){\n    this.getDeptList()\n  }\n}\n\n</script>\n\n<style scoped>\n\n</style>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}